{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jawaadahmar/Desktop/atlas-clothing/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jawaadahmar/Desktop/atlas-clothing/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useRef}from'react';import{Link}from'react-router-dom';import{AiOutlineMinus,AiOutlinePlus,AiOutlineLeft,AiOutlineShopping}from'react-icons/ai';import{TiDeleteOutline}from'react-icons/ti';import toast from'react-hot-toast';import{useStateContext}from'../context/StateContext';import{urlFor}from'../lib/client';import getStripe from'../lib/getStripe';import{Elements}from\"@stripe/react-stripe-js\";import{loadStripe}from\"@stripe/stripe-js\";//const stripePromise = loadStripe(STRIPE_PUBLISHABLE_KEY);\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Cart(){var cartRef=useRef();var _useStateContext=useStateContext(),totalPrice=_useStateContext.totalPrice,totalQuantities=_useStateContext.totalQuantities,cartItems=_useStateContext.cartItems,setShowCart=_useStateContext.setShowCart,toggleCartItemQuantity=_useStateContext.toggleCartItemQuantity,onRemove=_useStateContext.onRemove;var handleCheckout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var stripe,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getStripe();case 2:stripe=_context.sent;_context.next=5;return fetch('/api/');case 5:response=_context.sent;case 6:case\"end\":return _context.stop();}},_callee);}));return function handleCheckout(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"cart-wrapper\",ref:cartRef,children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"cart-heading\",onClick:function onClick(){return setShowCart(false);},children:[/*#__PURE__*/_jsx(AiOutlineLeft,{}),/*#__PURE__*/_jsx(\"span\",{className:\"heading\",children:\"Your Cart\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"cart-num-items\",children:[\"(\",totalQuantities,\" items)\"]})]}),cartItems.length<1&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty-cart\",children:[/*#__PURE__*/_jsx(AiOutlineShopping,{size:150}),/*#__PURE__*/_jsx(\"h3\",{children:\"Your shopping bag is empty\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return setShowCart(false);},className:\"btn\",children:\"Continue Shopping\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"product-container\",children:cartItems.length>=1&&cartItems.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"product\",children:[/*#__PURE__*/_jsx(\"img\",{src:urlFor(item===null||item===void 0?void 0:item.image[0]),className:\"cart-product-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-desc\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex top\",children:[/*#__PURE__*/_jsx(\"h5\",{children:item.name}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"$\",item.price]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex bottom\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{className:\"quantity-desc\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"minus\",onClick:function onClick(){return toggleCartItemQuantity(item._id,'dec');},children:/*#__PURE__*/_jsx(AiOutlineMinus,{})}),/*#__PURE__*/_jsx(\"span\",{className:\"num\",children:item.quantity}),/*#__PURE__*/_jsx(\"span\",{className:\"plus\",onClick:function onClick(){return toggleCartItemQuantity(item._id,'inc');},children:/*#__PURE__*/_jsx(AiOutlinePlus,{})})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-item\",onClick:function onClick(){return onRemove(item);},children:/*#__PURE__*/_jsx(TiDeleteOutline,{})})]})]})]},item._id);})}),cartItems.length>=1&&/*#__PURE__*/_jsxs(\"div\",{className:\"cart-bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"total\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Subtotal:\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"$\",totalPrice]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-container\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn\",onClick:handleCheckout,children:\"Pay with Stripe\"})})]})]})});}","map":{"version":3,"names":["React","useRef","Link","AiOutlineMinus","AiOutlinePlus","AiOutlineLeft","AiOutlineShopping","TiDeleteOutline","toast","useStateContext","urlFor","getStripe","Elements","loadStripe","jsx","_jsx","jsxs","_jsxs","Cart","cartRef","_useStateContext","totalPrice","totalQuantities","cartItems","setShowCart","toggleCartItemQuantity","onRemove","handleCheckout","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","stripe","response","wrap","_callee$","_context","prev","next","sent","fetch","stop","apply","arguments","className","ref","children","type","onClick","length","size","to","map","item","index","src","image","name","price","_id","quantity"],"sources":["/Users/jawaadahmar/Desktop/atlas-clothing/client/src/components/Cart.js"],"sourcesContent":["import React, {useRef} from 'react'\nimport { Link } from 'react-router-dom'\nimport { AiOutlineMinus, AiOutlinePlus, AiOutlineLeft, AiOutlineShopping } from 'react-icons/ai';\nimport { TiDeleteOutline } from 'react-icons/ti'\nimport toast from 'react-hot-toast'\n\nimport { useStateContext } from '../context/StateContext';\nimport { urlFor } from '../lib/client'\nimport getStripe from '../lib/getStripe';\n\n\n\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\n\n//const stripePromise = loadStripe(STRIPE_PUBLISHABLE_KEY);\n\nexport default function Cart() {\n  const cartRef = useRef();\n  const { totalPrice, totalQuantities, cartItems, setShowCart, toggleCartItemQuantity, onRemove } = useStateContext();\n\n  const handleCheckout = async () => {\n    const stripe = await getStripe();\n    const response = await fetch('/api/')\n  } \n  return (\n    <div className='cart-wrapper' ref={cartRef}>\n      <div className='cart-container'>\n        <button\n        type=\"button\"\n        className='cart-heading'\n        onClick={() => setShowCart(false)}>\n          <AiOutlineLeft />\n          <span className='heading'>Your Cart</span>\n          <span className='cart-num-items'>({totalQuantities} items)</span>\n        </button>\n\n        {cartItems.length < 1 && (\n          <div className='empty-cart'>\n            <AiOutlineShopping size={150}/>\n            <h3>Your shopping bag is empty</h3>\n            <Link to=\"/\">\n              <button\n                type='button'\n                onClick={() => setShowCart(false)}\n                className='btn'\n              >Continue Shopping</button>\n            </Link>\n          </div>\n        )}\n\n        <div className='product-container'>\n          {cartItems.length >= 1 && cartItems.map((item,index) => (\n            <div className='product' key={item._id}>\n              <img src={urlFor(item?.image[0])} className='cart-product-image'/>\n              <div className='item-desc'>\n                <div className='flex top'>\n                <h5>{item.name}</h5>\n                <h4>${item.price}</h4>\n                </div>\n                <div className='flex bottom'>\n                <div>\n                <p className=\"quantity-desc\">\n                  <span className=\"minus\" onClick={() => toggleCartItemQuantity(item._id,'dec')}><AiOutlineMinus /></span>\n                  <span className=\"num\">{item.quantity}</span>\n                  <span className=\"plus\" onClick={() => toggleCartItemQuantity(item._id,'inc')}><AiOutlinePlus /></span>\n                </p>\n                </div>\n                <button\n                  type='button'\n                  className='remove-item'\n                  onClick={() => onRemove(item)}\n                ><TiDeleteOutline/></button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n        {cartItems.length >= 1 && (\n          <div className='cart-bottom'>\n            <div className='total'>\n              <h3>Subtotal:</h3>\n              <h3>${totalPrice}</h3>\n            </div>\n            <div className='btn-container'>\n              <button type=\"button\" className='btn' onClick={handleCheckout}>\n                Pay with Stripe\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}