{"ast":null,"code":"import{__extends}from\"tslib\";import{AsyncAction}from'./AsyncAction';import{Subscription}from'../Subscription';import{AsyncScheduler}from'./AsyncScheduler';var VirtualTimeScheduler=function(_super){__extends(VirtualTimeScheduler,_super);function VirtualTimeScheduler(schedulerActionCtor,maxFrames){if(schedulerActionCtor===void 0){schedulerActionCtor=VirtualAction;}if(maxFrames===void 0){maxFrames=Infinity;}var _this=_super.call(this,schedulerActionCtor,function(){return _this.frame;})||this;_this.maxFrames=maxFrames;_this.frame=0;_this.index=-1;return _this;}VirtualTimeScheduler.prototype.flush=function(){var _a=this,actions=_a.actions,maxFrames=_a.maxFrames;var error;var action;while((action=actions[0])&&action.delay<=maxFrames){actions.shift();this.frame=action.delay;if(error=action.execute(action.state,action.delay)){break;}}if(error){while(action=actions.shift()){action.unsubscribe();}throw error;}};VirtualTimeScheduler.frameTimeFactor=10;return VirtualTimeScheduler;}(AsyncScheduler);export{VirtualTimeScheduler};var VirtualAction=function(_super){__extends(VirtualAction,_super);function VirtualAction(scheduler,work,index){if(index===void 0){index=scheduler.index+=1;}var _this=_super.call(this,scheduler,work)||this;_this.scheduler=scheduler;_this.work=work;_this.index=index;_this.active=true;_this.index=scheduler.index=index;return _this;}VirtualAction.prototype.schedule=function(state,delay){if(delay===void 0){delay=0;}if(Number.isFinite(delay)){if(!this.id){return _super.prototype.schedule.call(this,state,delay);}this.active=false;var action=new VirtualAction(this.scheduler,this.work);this.add(action);return action.schedule(state,delay);}else{return Subscription.EMPTY;}};VirtualAction.prototype.requestAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}this.delay=scheduler.frame+delay;var actions=scheduler.actions;actions.push(this);actions.sort(VirtualAction.sortActions);return 1;};VirtualAction.prototype.recycleAsyncId=function(scheduler,id,delay){if(delay===void 0){delay=0;}return undefined;};VirtualAction.prototype._execute=function(state,delay){if(this.active===true){return _super.prototype._execute.call(this,state,delay);}};VirtualAction.sortActions=function(a,b){if(a.delay===b.delay){if(a.index===b.index){return 0;}else if(a.index>b.index){return 1;}else{return-1;}}else if(a.delay>b.delay){return 1;}else{return-1;}};return VirtualAction;}(AsyncAction);export{VirtualAction};","map":{"version":3,"names":["AsyncAction","Subscription","AsyncScheduler","VirtualTimeScheduler","_super","__extends","schedulerActionCtor","maxFrames","VirtualAction","Infinity","_this","call","frame","index","prototype","flush","_a","actions","error","action","delay","shift","execute","state","unsubscribe","frameTimeFactor","scheduler","work","active","schedule","Number","isFinite","id","add","EMPTY","requestAsyncId","push","sort","sortActions","recycleAsyncId","undefined","_execute","a","b"],"sources":["/Users/jawaadahmar/Desktop/atlas-clothing/client/src/thistle-lion/node_modules/rxjs/src/internal/scheduler/VirtualTimeScheduler.ts"],"sourcesContent":["import { AsyncAction } from './AsyncAction';\nimport { Subscription } from '../Subscription';\nimport { AsyncScheduler } from './AsyncScheduler';\nimport { SchedulerAction } from '../types';\nimport { TimerHandle } from './timerHandle';\n\nexport class VirtualTimeScheduler extends AsyncScheduler {\n  /** @deprecated Not used in VirtualTimeScheduler directly. Will be removed in v8. */\n  static frameTimeFactor = 10;\n\n  /**\n   * The current frame for the state of the virtual scheduler instance. The difference\n   * between two \"frames\" is synonymous with the passage of \"virtual time units\". So if\n   * you record `scheduler.frame` to be `1`, then later, observe `scheduler.frame` to be at `11`,\n   * that means `10` virtual time units have passed.\n   */\n  public frame: number = 0;\n\n  /**\n   * Used internally to examine the current virtual action index being processed.\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\n   */\n  public index: number = -1;\n\n  /**\n   * This creates an instance of a `VirtualTimeScheduler`. Experts only. The signature of\n   * this constructor is likely to change in the long run.\n   *\n   * @param schedulerActionCtor The type of Action to initialize when initializing actions during scheduling.\n   * @param maxFrames The maximum number of frames to process before stopping. Used to prevent endless flush cycles.\n   */\n  constructor(schedulerActionCtor: typeof AsyncAction = VirtualAction as any, public maxFrames: number = Infinity) {\n    super(schedulerActionCtor, () => this.frame);\n  }\n\n  /**\n   * Prompt the Scheduler to execute all of its queued actions, therefore\n   * clearing its queue.\n   * @return {void}\n   */\n  public flush(): void {\n    const { actions, maxFrames } = this;\n    let error: any;\n    let action: AsyncAction<any> | undefined;\n\n    while ((action = actions[0]) && action.delay <= maxFrames) {\n      actions.shift();\n      this.frame = action.delay;\n\n      if ((error = action.execute(action.state, action.delay))) {\n        break;\n      }\n    }\n\n    if (error) {\n      while ((action = actions.shift())) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  }\n}\n\nexport class VirtualAction<T> extends AsyncAction<T> {\n  protected active: boolean = true;\n\n  constructor(\n    protected scheduler: VirtualTimeScheduler,\n    protected work: (this: SchedulerAction<T>, state?: T) => void,\n    protected index: number = (scheduler.index += 1)\n  ) {\n    super(scheduler, work);\n    this.index = scheduler.index = index;\n  }\n\n  public schedule(state?: T, delay: number = 0): Subscription {\n    if (Number.isFinite(delay)) {\n      if (!this.id) {\n        return super.schedule(state, delay);\n      }\n      this.active = false;\n      // If an action is rescheduled, we save allocations by mutating its state,\n      // pushing it to the end of the scheduler queue, and recycling the action.\n      // But since the VirtualTimeScheduler is used for testing, VirtualActions\n      // must be immutable so they can be inspected later.\n      const action = new VirtualAction(this.scheduler, this.work);\n      this.add(action);\n      return action.schedule(state, delay);\n    } else {\n      // If someone schedules something with Infinity, it'll never happen. So we\n      // don't even schedule it.\n      return Subscription.EMPTY;\n    }\n  }\n\n  protected requestAsyncId(scheduler: VirtualTimeScheduler, id?: any, delay: number = 0): TimerHandle {\n    this.delay = scheduler.frame + delay;\n    const { actions } = scheduler;\n    actions.push(this);\n    (actions as Array<VirtualAction<T>>).sort(VirtualAction.sortActions);\n    return 1;\n  }\n\n  protected recycleAsyncId(scheduler: VirtualTimeScheduler, id?: any, delay: number = 0): TimerHandle | undefined {\n    return undefined;\n  }\n\n  protected _execute(state: T, delay: number): any {\n    if (this.active === true) {\n      return super._execute(state, delay);\n    }\n  }\n\n  private static sortActions<T>(a: VirtualAction<T>, b: VirtualAction<T>) {\n    if (a.delay === b.delay) {\n      if (a.index === b.index) {\n        return 0;\n      } else if (a.index > b.index) {\n        return 1;\n      } else {\n        return -1;\n      }\n    } else if (a.delay > b.delay) {\n      return 1;\n    } else {\n      return -1;\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}